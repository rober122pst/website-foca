<html lang="pt-BR" class="scroll-smooth">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Foca Overview - Tarefas do Dia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />
    <style>
        body {
            font-family: "Montserrat", sans-serif;
        }

        ul::-webkit-scrollbar {
            width: 6px;
        }

        ul::-webkit-scrollbar-track {
            background: #1a1a1a;
        }

        ul::-webkit-scrollbar-thumb {
            background-color: #f5003b;
            border-radius: 3px;
        }

        /* Custom checkbox */
        .custom-checkbox {
            appearance: none;
            -webkit-appearance: none;
            background-color: #121212;
            border: 2px solid #f5003b;
            width: 20px;
            height: 20px;
            border-radius: 6px;
            cursor: pointer;
            position: relative;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .custom-checkbox:checked {
            background-color: #f5003b;
            border-color: #f5003b;
        }

        .custom-checkbox:checked::after {
            content: "";
            position: absolute;
            left: 5px;
            top: 1px;
            width: 6px;
            height: 12px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }
    </style>
</head>

<body class="bg-[#121212] text-[#e5e5e5] min-h-screen flex relative">
    <!-- Sidebar -->
    <aside
        class="flex flex-col bg-gradient-to-b from-[#f5003b] to-[#b8003a] w-56 min-h-screen p-6 text-white select-none">
        <div class="mb-12">
            <h1 class="font-extrabold text-3xl tracking-wide">FOCA</h1>
        </div>
        <nav class="flex flex-col gap-6 text-sm font-semibold">
            <a href="#" class="flex items-center gap-3 bg-[#0a9eff] rounded-md px-4 py-2">
                <i class="fas fa-chart-line text-base"></i>
                Overview
            </a>
            <a href="#" class="flex items-center gap-3 hover:opacity-90">
                <i class="fas fa-calendar-alt text-base"></i>
                Rotina
            </a>
            <a href="#" class="flex items-center gap-3 hover:opacity-90">
                <i class="fas fa-tasks text-base"></i>
                Tarefas
            </a>
            <a href="#" class="flex items-center gap-3 hover:opacity-90">
                <i class="fas fa-hourglass-start text-base"></i>
                Podomoro
            </a>
            <a href="#" class="flex items-center gap-3 hover:opacity-90">
                <i class="fas fa-fire-alt text-base"></i>
                Focão AI
            </a>
        </nav>
        <div class="border-t border-white/20 mt-12 pt-6 flex flex-col gap-6 text-sm font-semibold">
            <a href="#" class="flex items-center gap-3 hover:opacity-90">
                <i class="fas fa-cog text-base"></i>
                Configurações
            </a>
            <a href="#" class="flex items-center gap-3 hover:opacity-90">
                <i class="fas fa-sign-out-alt text-base"></i>
                Sair
            </a>
        </div>
    </aside>

    <!-- Main content -->
    <main class="flex-1 p-6 overflow-y-auto">
        <div class="max-w-[900px] mx-auto flex flex-col gap-10">
            <h2 class="text-white font-semibold text-lg select-none">Dashboard de Tarefas</h2>

            <div class="text-xs text-[#b3b3b3] select-none mb-4">Data: 13 de maio de 2025</div>

            <!-- Tasks of the day section -->
            <section>
                <h3 class="text-white font-semibold text-base mb-4 select-none tracking-wide">TAREFAS DO DIA</h3>

                <!-- Task list container -->
                <ul id="taskList"
                    class="bg-[#2a2a2a] rounded-md p-4 shadow-[0_0_8px_#f5003b] max-h-72 overflow-y-auto space-y-3 list-none">
                    <!-- Task items will be inserted here -->
                </ul>
            </section>

            <!-- Dashboard section below tasks -->
            <section>
                <div class="flex flex-col sm:flex-row justify-between gap-6 mt-10">
                    <!-- Completed tasks -->
                    <div class="flex-1 bg-[#2a2a2a] rounded-md p-8 text-center select-none shadow-[0_0_10px_#f5003b]">
                        <div class="text-xs text-[#fca5a5] mb-2 tracking-wide">TAREFAS COMPLETADAS</div>
                        <div id="completedCount" class="text-5xl font-extrabold text-[#f5003b]">0</div>
                    </div>

                    <!-- Uncompleted tasks -->
                    <div class="flex-1 bg-[#2a2a2a] rounded-md p-8 text-center select-none shadow-[0_0_10px_#666666]">
                        <div class="text-xs text-[#999999] mb-2 tracking-wide">TAREFAS NÃO COMPLETADAS</div>
                        <div id="uncompletedCount" class="text-5xl font-extrabold text-[#666666]">0</div>
                    </div>
                </div>

                <div class="w-full max-w-md mx-auto h-72 mt-6">
                    <canvas id="tasksChart"
                        aria-label="Gráfico de pizza mostrando porcentagem de tarefas completadas e não completadas"
                        role="img"></canvas>
                </div>

                <div
                    class="flex justify-center gap-10 mt-6 select-none text-sm font-semibold text-[#b3b3b3] tracking-wide">
                    <div class="flex items-center gap-3">
                        <span class="w-5 h-5 rounded-full bg-[#f5003b] block shadow-[0_0_8px_#f5003b]"></span>
                        Completadas
                    </div>
                    <div class="flex items-center gap-3">
                        <span class="w-5 h-5 rounded-full bg-[#666666] block shadow-[0_0_8px_#666666]"></span> Não
                        Completadas
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="fixed inset-0 flex items-center justify-center z-50 hidden">
        <div class="absolute inset-0 bg-black bg-opacity-70"></div>
        <div class="relative bg-[#1a1a1a] rounded-lg p-6 max-w-sm w-full text-center shadow-lg z-10">
            <p class="text-white mb-6 text-base" id="confirmMessage">Deseja realmente remover esta tarefa?</p>
            <div class="flex justify-center gap-6">
                <button id="confirmYes" class="btn-completed px-6 py-2 rounded-md font-semibold transition">Sim</button>
                <button id="confirmNo"
                    class="bg-[#666666] hover:bg-[#444444] text-white px-6 py-2 rounded-md font-semibold transition">Não</button>
            </div>
        </div>
    </div>

    <script>
        const taskList = document.getElementById('taskList');
        const taskForm = document.getElementById('taskForm');
        const taskInput = document.getElementById('taskInput');
        const completedCountEl = document.getElementById('completedCount');
        const uncompletedCountEl = document.getElementById('uncompletedCount');
        const ctx = document.getElementById('tasksChart').getContext('2d');

        const confirmModal = document.getElementById('confirmModal');
        const confirmMessage = document.getElementById('confirmMessage');
        const confirmYes = document.getElementById('confirmYes');
        const confirmNo = document.getElementById('confirmNo');

        let taskToDeleteId = null;

        // Initial dummy tasks (3 tasks)
        let tasks = [
            { id: 1, text: 'Revisar relatório mensal', completed: false },
            { id: 2, text: 'Planejar semana', completed: false },
            { id: 3, text: 'Enviar e-mails pendentes', completed: true }
        ];

        // Render task list items
        function renderTaskList() {
            taskList.innerHTML = '';
            tasks.forEach(task => {
                const li = document.createElement('li');
                li.className = 'flex justify-between items-center bg-[#121212] rounded-md p-3 shadow-inner shadow-[#f5003b]/30';

                const label = document.createElement('label');
                label.className = 'flex items-center gap-2 cursor-pointer select-none';
                label.setAttribute('for', `task-${task.id}`);

                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `task-${task.id}`;
                checkbox.checked = task.completed;
                checkbox.className = 'custom-checkbox';
                checkbox.addEventListener('change', () => {
                    task.completed = checkbox.checked;
                    updateCountsAndChart();
                    renderTaskList();
                });

                const span = document.createElement('span');
                span.textContent = task.text;
                if (task.completed) {
                    span.className = 'line-through text-[#666666]';
                }

                label.appendChild(checkbox);
                label.appendChild(span);

                const btnRemove = document.createElement('button');
                btnRemove.setAttribute('aria-label', `Remover tarefa ${task.text}`);
                btnRemove.className = 'text-[#f5003b] hover:text-[#c4002f] ml-4';
                btnRemove.innerHTML = '<i class="fas fa-trash-alt"></i>';
                btnRemove.addEventListener('click', () => {
                    taskToDeleteId = task.id;
                    confirmMessage.textContent = `Deseja realmente remover a tarefa:\n"${task.text}"?`;
                    confirmModal.classList.remove('hidden');
                });

                li.appendChild(label);
                li.appendChild(btnRemove);
                taskList.appendChild(li);
            });
        }

        // Update completed/uncompleted counts and chart
        function updateCountsAndChart() {
            const completed = tasks.filter(t => t.completed).length;
            const uncompleted = tasks.length - completed;
            completedCountEl.textContent = completed;
            uncompletedCountEl.textContent = uncompleted;

            doughnutChart.data.datasets[0].data = [completed, uncompleted];
            doughnutChart.update();
        }

        // Confirmation modal buttons
        confirmYes.addEventListener('click', () => {
            if (taskToDeleteId !== null) {
                tasks = tasks.filter(t => t.id !== taskToDeleteId);
                taskToDeleteId = null;
                renderTaskList();
                updateCountsAndChart();
            }
            confirmModal.classList.add('hidden');
        });

        confirmNo.addEventListener('click', () => {
            taskToDeleteId = null;
            confirmModal.classList.add('hidden');
        });

        // Initialize chart
        const doughnutChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Completadas', 'Não Completadas'],
                datasets: [{
                    data: [0, 0],
                    backgroundColor: ['#f5003b', '#666666'],
                    hoverOffset: 10,
                    borderWidth: 0,
                }]
            },
            options: {
                cutout: '70%',
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        backgroundColor: '#1a1a1a',
                        titleColor: '#f5003b',
                        bodyColor: '#e5e5e5',
                        borderColor: '#f5003b',
                        borderWidth: 1,
                        cornerRadius: 4,
                        padding: 8,
                        callbacks: {
                            label: function (context) {
                                const label = context.label || '';
                                const value = context.parsed || 0;
                                const total = context.chart._metasets[context.datasetIndex].total;
                                const percent = total ? ((value / total) * 100).toFixed(1) : 0;
                                return `${label}: ${value} (${percent}%)`;
                            }
                        }
                    }
                },
                responsive: true,
                maintainAspectRatio: false,
            }
        });

        // Initial render
        renderTaskList();
        updateCountsAndChart();
    </script>
</body>

</html>